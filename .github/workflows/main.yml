name: CI

on: [push]

jobs:
  industrial_ci:
    strategy:
      matrix:
        env:
          - ROS_DISTRO=melodic
          - ROS_DISTRO=melodic ROS_REPO=main
    name: ${{matrix.env}} 
    runs-on: ubuntu-latest
    env:
      TARGET_REPO_NAME: ${GITHUB_REPOSITORY##*/}
      TARGET_REPO_PATH: ${GITHUB_WORKSPACE}
    steps:
    - uses: actions/checkout@v1
    - run: git clone --quiet --depth=1 https://github.com/ros-industrial/industrial_ci.git .industrial_ci -b master
    - run: .industrial_ci/ci.sh ${{matrix.env}}
